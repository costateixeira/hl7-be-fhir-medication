<?xml version="1.0" encoding="UTF-8"?>

<ExampleScenario xmlns="http://hl7.org/fhir">
  <id value="example-1-scenario"/>
  <name value="ChangedmedicationScenario"/>
  <status value="draft"/>
  <experimental value="false"/>
  <date value="2019-09-11T00:00:00.000+01:00"/>
  <actor>
    <actorId value="GP"/>
    <type value="person"/>
    <name value="Dr. Durant"/>
  </actor>
  <actor>
    <actorId value="PATIENT"/>
    <type value="person"/>
    <name value="Pia Peters"/>
  </actor>
  <actor>
    <actorId value="VAULT"/>
    <type value="entity"/>
    <name value="Vault"/>
  </actor>
  <actor>
    <actorId value="GPSOFT"/>
    <type value="entity"/>
    <name value="GP Software"/>
  </actor>
  <actor>
    <actorId value="PHARM"/>
    <type value="person"/>
    <name value="Pharmacist"/>
  </actor>
  <actor>
    <actorId value="PHARMSOFT"/>
    <type value="entity"/>
    <name value="Pharmacy Software"/>
  </actor>
  <instance>
    <resourceId value="noel-allergy.v0"/>
    <resourceType value="AllergyIntolerance"/>
    <name value="Allergy Record"/>
  </instance>
  <instance>
    <resourceId value="EB"/>
    <resourceType value="Bundle"/>
    <name value="Empty Bundle"/>
  </instance>
  <instance>
    <resourceId value="EB"/>
    <resourceType value="Bundle"/>
    <name value="Empty Bundle"/>
  </instance>
  <instance>
    <resourceId value="noel-allergy.v1"/>
    <resourceType value="AllergyIntolerance"/>
    <name value="Updated Allergy Recor"/>
  </instance>
  <process>
    <title value="Change Brand Prescription"/>
    <description value="description"/>
    <preConditions value="The patient visits their GP and is prescribed Amlor for hypertension. The GP prescribes Amlor, but at the pharmacy there is no Amlor and amlodipin Sandoz is dispensed"/>
    <postConditions value="A new treatment and treatmentLine are created, inside the new treatment line, a prescription and dispense are contained and is possible to see which medication is associated with each"/>
    <step>
      <operation>
        <number value="1"/>
        <name value="Get Patient&#39;s Medication"/>
        <initiator value="GP"/>
        <receiver value="VAULT"/>
        <response>
          <resourceId value="EB"/>
        </response>
      </operation>
    </step>
    <step>
      <operation>
        <number value="2"/>
        <name value="Create new prescription"/>
        <initiator value="GP"/>
        <receiver value="VAULT"/>
        <request>
          <resourceId value="noel-allergy.v0"/>
        </request>
      </operation>
    </step>
    <step>
      <operation>
        <number value="3"/>
        <name value="Create new treatment and treatment Line"/>
        <initiator value="VAULT"/>
        <receiver value="VAULT"/>
        <request>
          <resourceId value="noel-allergy.v0"/>
        </request>
      </operation>
    </step>
    <step>
      <operation>
        <number value="4"/>
        <name value="Get patient&#39;s Prescriptions"/>
        <initiator value="PHARM"/>
        <receiver value="VAULT"/>
        <response>
          <resourceId value="noel-allergy.v0"/>
        </response>
      </operation>
    </step>
    <step>
      <operation>
        <number value="5"/>
        <name value="Create new dispense"/>
        <initiator value="PHARM"/>
        <receiver value="VAULT"/>
        <request>
          <resourceId value="noel-allergy.v1"/>
        </request>
      </operation>
    </step>
    <step>
      <operation>
        <number value="6"/>
        <name value="Update treatment Line"/>
        <initiator value="GP"/>
        <receiver value="VAULT"/>
        <response>
          <resourceId value="noel-allergy.v1"/>
        </response>
      </operation>
    </step>
  </process>
</ExampleScenario>